<!DOCTYPE html>
<html>
<head>
    <title>Clear LocalStorage</title>
    <style>
        body {
            background: #111;
            color: #fff;
            font-family: monospace;
            padding: 20px;
        }
        button {
            background: #333;
            color: #fff;
            border: 1px solid #666;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #444;
        }
        .log {
            background: #222;
            padding: 10px;
            margin-top: 20px;
            border: 1px solid #444;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>Clear Test Type and Platform Data from LocalStorage</h1>
    
    <button onclick="clearTestData()">Clear Test/Platform Data</button>
    <button onclick="clearAllData()">Clear ALL LocalStorage</button>
    <button onclick="showCurrentData()">Show Current Data</button>
    
    <div class="log" id="log"></div>
    
    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += message + '<br>';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearTestData() {
            const keysToRemove = [
                'global_test_types',
                'global_platforms',
                'experiment_test_types',
                'experiment_platforms',
                'hr_test_categories',
                'creativeTestTypes',
                'creativePlatformTypes'
            ];
            
            keysToRemove.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                    log(`✓ Removed: ${key}`);
                } else {
                    log(`- Not found: ${key}`);
                }
            });
            
            log('<b>Test data cleared! Refresh your app to load from database.</b>');
        }
        
        function clearAllData() {
            if (confirm('This will clear ALL localStorage data. Are you sure?')) {
                const keys = Object.keys(localStorage);
                keys.forEach(key => {
                    localStorage.removeItem(key);
                    log(`✓ Removed: ${key}`);
                });
                log('<b>All localStorage cleared!</b>');
            }
        }
        
        function showCurrentData() {
            log('<b>Current localStorage keys related to test types/platforms:</b>');
            const relevantKeys = [
                'global_test_types',
                'global_platforms',
                'experiment_test_types',
                'experiment_platforms',
                'hr_test_categories',
                'creativeTestTypes',
                'creativePlatformTypes'
            ];
            
            relevantKeys.forEach(key => {
                const value = localStorage.getItem(key);
                if (value) {
                    try {
                        const parsed = JSON.parse(value);
                        log(`<b>${key}:</b> ${Array.isArray(parsed) ? parsed.length + ' items' : 'object'}`);
                        log(`<pre>${JSON.stringify(parsed, null, 2)}</pre>`);
                    } catch (e) {
                        log(`<b>${key}:</b> ${value}`);
                    }
                }
            });
        }
        
        // Show current data on load
        showCurrentData();
    </script>
</body>
</html>